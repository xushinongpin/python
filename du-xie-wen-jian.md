## 读写文件

open\(\)返回一个文件对象，最常用的有两个参数：。open\(filename, mode\)

```
>>> f = open('fibo','w')
>>>
```

第一个参数是包含文件名的字符串。第二个参数是另一个字符串，其中包含一些描述文件使用方式的字符。 模式可以是'r'仅读取文件时，'w' 仅写入（将删除同名的现有文件），并 'a'打开文件进行追加; 写入文件的任何数据都会自动添加到最后。 'r+'打开文件进行读写。所述模式参数是可选的; 'r'将被假设，如果它被省略。

通常，文件以文本模式打开，这意味着您从文件读取和写入文件，这些文件以特定编码进行编码。如果未指定编码，则默认值取决于平台（请参阅参考资料 open\(\)）。'b'附加到模式后以二进制模式打开文件 ：现在以bytes对象的形式读取和写入数据。此模式应用于所有不包含文本的文件。

在文本模式下，读取时的默认设置是将平台特定的行结尾（\n在Unix上，\r\n在Windows上）转换为just \n。在文本模式下写入时，默认设置是将事件的发生转换\n为特定于平台的行结尾。这幕后的修改文件数据精细的文本文件，但会喜欢，在破坏了二进制数据 JPEG或EXE文件。在读取和写入此类文件时要非常小心地使用二进制模式。

with在处理文件对象时，最好使用关键字。优点是文件在套件完成后正确关闭，即使在某个时刻引发了异常。使用with也比写相当于短得多try- finally块：

```
>>> with open('fibo') as f:
...      read_data = f.read()
...
>>> f.closed
True
>>>
```

如果您没有使用该with关键字，那么您应该调用 f.close\(\)以关闭该文件并立即释放它使用的任何系统资源。如果您没有显式关闭文件，Python的垃圾收集器最终将销毁该对象并为您关闭打开的文件，但该文件可能会保持打开状态一段时间。另一个风险是不同的Python实现将在不同的时间进行清理。

通过with语句或通过调用关闭文件对象后f.close\(\)，尝试使用该文件对象将自动失败。

```
>>> f.close()
>>> f.read()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: I/O operation on closed file.
>>>

```



